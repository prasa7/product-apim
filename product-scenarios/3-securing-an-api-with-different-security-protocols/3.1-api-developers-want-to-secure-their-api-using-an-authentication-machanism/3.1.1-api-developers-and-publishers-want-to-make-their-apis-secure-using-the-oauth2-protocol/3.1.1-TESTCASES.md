# 3.1.1 Test cases for API secure


| TestCaseID| TestCase| Test Description| Status|
| ----------| --------| ----------| ------|
| 3.1.1.1| Any API that is published by providing the mandatory parameters accessible with an application that has a valid subscription and a valid OAuth2 token | **Given**:Test environment is set properly. </br> **When**:Request sent to access a resource of an application with valid OAuth2 token, </br> **Then**:Application should give the proper response from the backend| Automated|
| 3.1.1.2| An API developer/publisher should be able to select security type as "Application" for at least one resource of the API | **Given**:Test environment is set properly.Resource of the API is setup security type as "Application" </br> **When**:Request sent to access a resource of an application by client_credentials </br> **Then**:Application should give the proper response from the backend | Automated|
| 3.1.1.3| An API developer/publisher should be able to select security type as "Application User" for at least one resource of the API. | **Given**:Test environment is set properly.Resource of the API is setup security type as "Application" </br> **When**:Request sent to access a resource of an application by password grant-type  </br> **Then**:Application should give the proper response from the backend | Automated|
| 3.1.1.4| An API developer/publisher should be able to set a custom Auth header for the API to bear the OAuth2 token. | **Given**:Test environment is set properly.Add custom auth header to API </br> **When**:Request sent to access a resource of an API with custom auth header </br> **Then**: Related subscribed application should give the proper response from the backend | Automated|
| 3.1.1.7| An API developer/publisher should be able to select security type as "None" for at least one resource of the API | **Given**:Test environment is set properly.Resource of the API is setup security type as "None" </br> **When**:Request sent to access a resource of  without token </br> **Then**:Application should give the proper response from the backend | Automated|
| 3.1.1.8| [N] An API that is published with mandatory fields and defaults only should not be accessible if no access token is provided. | **Given**:Test environment is set properly. </br> **When**:Request sent to access an application without token </br> **Then**:Application should give 401 unauthorized response | Automated|
| 3.1.1.9| [N] An API that is published with mandatory fields and defaults only should not be accessible if an invalid access token is provided. | **Given**:Test environment is set properly. </br> **When**:Request sent to access an application with invalid token </br> **Then**:Application should give 401 unauthorized response | Automated|
| 3.1.1.10| [N] An API that is published with mandatory fields and defaults only should not be accessible if an expired access token is provided. | **Given**:Test environment is set properly. </br> **When**:Request sent to access an application with expired token </br> **Then**:Application should give 401 unauthorized response | Automated|
| 3.1.1.11| [N] An API that is published with mandatory fields and defaults only should not be accessible if a revoked access token is provided| **Given**:Test environment is set properly. </br> **When**:Request sent to access an application with revoked token </br> **Then**:Application should give 401 unauthorized response | Automated|
| 3.1.1.12| [N] If a valid access token obtained using the client_credentials grant is sent to a resource of an API where the security type in the resource is "Application User", the request should fail with a 401 | **Given**:Test environment is set properly.Resource of the API is setup security type as "Application User" </br> **When**:Request sent to access a resource of an application by client_credentials </br> **Then**:Application should give 401 unauthorized response| Automated|
| 3.1.1.13| [N] If a valid access token obtained using the password grant is sent to a resource of an API where the security type in the resource is "Application", the request should fail with a 401 | **Given**:Test environment is set properly.Resource of the API is setup security type as "Application" </br> **When**:Request sent to access a resource of an application by password grant </br> **Then**:Application should give 401 unauthorized response| Automated|
| 3.1.1.15| [N] When an api developer/publisher has set a custom auth header for the API named 'foo', a request made to an API which has been published providing the mandatory fields and other defaults (except the custom auth header) only should fail if a valid access token is sent using the 'Authorization' header. | **Given**:Test environment is set properly.Add custom auth header to API </br> **When**:Request sent to access resource with Authorization header </br> **Then**:Application should give 401 unauthorized response | Automated|
| 3.1.1.17| [N] An API that is published with mandatory fields and defaults only should not be accessible if the Authorization header does not follow the proper format. Following are the invalids. | **Given**:Test environment is set properly. </br> **When**:Request sent to access a resource of API with incorrect format </br> **Then**:Application should give 401 unauthorized response | Automated|
| 3.1.1.18| [N] When an API is in published state a person with a creator role cannot modify the custom auth header. | **Given**:Test environment is set properly. </br> **When**: User with creator role try to changed custom header in already published API </br> **Then**:Application should give 401 unauthorized response | Automated|

 _Note:_ </br>
_\* Negative test cases(try to attempt incorrect behaviour) will have prefix as '\[N]' to show the separation_